<div class="players-slider-wrapper">
  <div class="players-slider swiper">
    <div class="swiper-wrapper">
      <!-- JS сгенерирует слайды -->
    </div>
  </div>
</div>
<!-- Swiper CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // Данные игроков и игр
  const names = ['Mustafa', 'Ahmet', 'Mehmet', 'Ali', 'Hasan', 'Murat'];
  const images = [
    'images/player1.webp',
    'images/player2.webp',
    'images/player3.webp',
    'images/player4.webp',
    'images/player5.webp',
    'images/player6.webp'
  ];
  const games = [
    { img: 'images/game1.png', name: 'Aviator ', url: 'https://example.com/game1' },
    { img: 'images/game2.png', name: 'Book of Ra', url: 'https://example.com/game2' },
    { img: 'images/game3.png', name: 'Buffalo Power', url: 'https://example.com/game3' }, 
    { img: 'images/game4.png', name: 'Crash', url: 'https://example.com/game4' },
    { img: 'images/game5.png', name: 'Dice', url: 'https://example.com/game5' }, 
    { img: 'images/game6.png', name: 'Gates of Olympus', url: 'https://example.com/game6' }
  ];

  const slides = [];
  // Первая шестерка — без повторов
  for (let i = 0; i < 6; i++) {
    const count = Math.floor(Math.random() * 201) + 100; // 100-300
    let flag = '';
    if ((i + 1) % 3 === 0) {
      const plus = Math.floor(Math.random() * 21) + 10;
      flag = `<span class='players-list__flag players-list__flag--plus'>+${plus} ₺</span>`;
    } else if ((i + 1) % 4 === 0) {
      const minus = Math.floor(Math.random() * 21) + 10;
      flag = `<span class='players-list__flag players-list__flag--minus'>-${minus} ₺</span>`;
    }
    slides.push(`
      <div class="players-list__item swiper-slide" style="background-image: url('${images[i]}');">
        <div class="players-list__content">
          <div class="players-list__info">
            <span class="players-list__name">${names[i]}</span>
            <span class="players-list__count">${count} ₺</span>
            ${flag}
          </div>
          <a class="players-list__game" href="${games[i].url}" target="_blank">
            <div style="background-image: url('${games[i].img}');" class="players-list__game-img"></div>
            ${games[i].name}
          </a>
        </div>
      </div>
    `);
  }
  // Вторая шестерка — те же, но снова без повторов
  for (let i = 0; i < 6; i++) {
    const count = Math.floor(Math.random() * 201) + 100; // 100-300
    let flag = '';
    if ((i + 7) % 3 === 0) {
      const plus = Math.floor(Math.random() * 21) + 10;
      flag = `<span class='players-list__flag players-list__flag--plus'>+${plus} ₺</span>`;
    } else if ((i + 7) % 4 === 0) {
      const minus = Math.floor(Math.random() * 21) + 10;
      flag = `<span class='players-list__flag players-list__flag--minus'>-${minus} ₺</span>`;
    }
    slides.push(`
     <div class="players-list__item swiper-slide" style="background-image: url('${images[i]}');">
        <div class="players-list__content">
          <div class="players-list__info">
            <span class="players-list__name">${names[i]}</span>
            <span class="players-list__count">${count} ₺</span>
            ${flag}
          </div>
          <a class="players-list__game" href="${games[i].url}" target="_blank">
            <div style="background-image: url('${games[i].img}');" class="players-list__game-img"></div>
            ${games[i].name}
          </a>
        </div>
      </div>
    `);
  }

  const wrapper = document.querySelector('.players-slider .swiper-wrapper');
  if (wrapper) {
    wrapper.innerHTML = slides.join('');
    // Определяем сколько слайдов реально помещается в контейнере
    const container = document.querySelector('.players-slider');
    let visibleSlides = 1;
    if (container) {
      const containerWidth = container.offsetWidth;
      visibleSlides = Math.floor(containerWidth / 280);
    }
    // loop и centeredSlides — только если слайдов больше, чем помещается на экране
    const enoughSlides = slides.length > visibleSlides;
    const swiper = new Swiper('.players-slider', {
      slidesPerView: 'auto',
      slidesPerGroup: 1,
      spaceBetween: 20,
      loop: enoughSlides,
      autoplay: {
        delay: 3500,
        disableOnInteraction: false,
      },
      centeredSlides: enoughSlides,
      speed: 500,
    });
    swiper.update();
  }
});
</script>
